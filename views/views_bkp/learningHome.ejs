<html>
  <head>
    <title>Learning Course</title>
    <link rel="stylesheet" href="/stylesheets/styles.css">
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.283.1.min.js"></script>
    <script>
      var server_url1 = '<%=server_url%>';
      var bucketName = 'studentcourse'
      var bucketRegion = 'us-east-1'; 
 AWS.config.update({
    region: bucketRegion,
    accessKeyId : 'AKIAWYV5ST2BIFONE2IN',
    secretAccessKey : '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'
  });
   var s3 = new AWS.S3({
    params: {Bucket: bucketName}
  });
      function listFolders(server_url1) {
     
    s3.listObjects({Delimiter: '/'}, function(err, data) {
      if (err) {
        return alert('There was an error showing your courses folder: ' + err.message);
      } else {
        var folders = data.CommonPrefixes.map(function(commonPrefix) {
        var prefix = commonPrefix.Prefix;
        var folderName = decodeURIComponent(prefix.replace('/', ''));
        return getHtml([
              '<button onclick="location.href= '+ server_url1 + '/learningCourse/' + folderName + '\'" style="border:solid 0px #e6b215;border-radius:8px;font-size:16px;color:#ffffff;padding:5px 18px;background-color:#FF9900;cursor:pointer;">' + folderName + '</button>',
          ]);
        });
        
          
        var htmlTemplate = [
            '<h1>Learning Course</h1>',
          '<ul>',
            getHtml(folders),
          '</ul>',
        '<br/>',
        '<br/>',
        ]
        document.getElementById('learninghomePage').innerHTML = getHtml(htmlTemplate);
      }
    });

  }

      function getHtml(template) {
           return template.join('\n');
        }

        //call the function in the JS to list Images
        listFolders(server_url1);

  </script> 
  </head>
  <body class="divbody">
    <h1 class="h1css">Welcome to ITOTS!</h1>
    <label class="logoutPos">
        <input type=button onClick="location.href='https://project2.auth.us-east-1.amazoncognito.com/login?response_type=token&client_id=5p39s85v7mikvqbak1gmc80f29&redirect_uri=https://d2aed6h3zvv2he.cloudfront.net/index.html'" value='Logout' class="buttons"> 
    </label>  
    <div id="learninghomePage" class="margin"> 
    </div> 
    </div>
  </body>
</html>
